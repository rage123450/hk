#include "Constants.hpp"
#include "Random.hpp"

namespace els {
	namespace Constants {

		const std::pair<int, int> expTable[81] = {		// EXP Table (Required EXP, Total EXP)
			ii(0, 0),					// 0
			ii(1400, 1400),					// 1
			ii(2240, 3640),				// 2
			ii(3780, 7420),				// 3
			ii(5880, 13300),				// 4
			ii(8260, 21560),				// 5
			ii(10780, 32340),			// 6
			ii(13300, 45640),			// 7
			ii(15820, 61460),			// 8

			ii(7700, 29300),			// 9
			ii(9700, 39000),			// 10
			ii(11800, 50800),			// 11
			ii(14600, 65400),			// 12
			ii(17700, 83100),			// 13
			ii(21300, 104400),			// 14
			ii(25700, 130100),			// 15
			ii(30800, 160900),			// 16
			ii(36700, 197600),			// 17
			ii(43400, 241000),			// 18
			ii(50900, 291900),			// 19
			ii(60300, 352200),			// 20
			ii(71100, 423300),			// 21
			ii(83300, 506600),			// 22
			ii(97400, 604000),			// 23
			ii(113500, 717500),			// 24
			ii(132000, 849500),			// 25
			ii(152500, 1002000),		// 26
			ii(175800, 1177800),		// 27
			ii(202000, 1379800),		// 28
			ii(231300, 1611100),		// 29
			ii(264600, 1875700),		// 30
			ii(303200, 2178900),		// 31
			ii(346400, 2525300),		// 32
			ii(396100, 2921400),		// 33
			ii(451300, 3372700),		// 34
			ii(513100, 3885800),		// 35
			ii(583300, 4469100),		// 36
			ii(661500, 5130600),		// 37
			ii(747200, 5877800),		// 38
			ii(843200, 6721000),		// 39
			ii(954000, 7675000),		// 40
			ii(1077600, 8752600),		// 41
			ii(1218300, 9970900),		// 42
			ii(1377300, 11348200),		// 43
			ii(1554800, 12903000),		// 44
			ii(1752300, 14655300),		// 45
			ii(1972900, 16628200),		// 46
			ii(2218900, 18847100),		// 47
			ii(2490000, 21337100),		// 48
			ii(2790200, 24127300),		// 49
			ii(3132600, 27259900),		// 50
			ii(3519900, 30779800),		// 51
			ii(3959200, 34739000),		// 52
			ii(4448600, 39187600),		// 53
			ii(4995400, 44183000),		// 54
			ii(5607500, 49790500),		// 55
			ii(6287200, 56077700),		// 56
			ii(7043000, 63120700),		// 57
			ii(7876700, 70997400),		// 58
			ii(8798800, 79796200),		// 59
			ii(9841800, 89638000),		// 60
			ii(11025700, 100663700),	// 61
			ii(12357700, 113021400),	// 62
			ii(13842500, 126863900),	// 63
			ii(15506400, 142370300),	// 64
			ii(17364200, 159734500),	// 65
			ii(19423000, 179157500),	// 66
			ii(21697600, 200855100),	// 67
			ii(24223900, 225079000),	// 68
			ii(26999200, 252078200),	// 69
			ii(30146800, 282225000),	// 70
			ii(33707500, 315932500),	// 71
			ii(37715800, 353648300),	// 72
			ii(42182800, 395831100),	// 73
			ii(47185300, 443016400),	// 74
			ii(52752600, 495769000),	// 75
			ii(58926800, 554695800),	// 76
			ii(65756100, 620451900),	// 77
			ii(73303500, 693755400),	// 78
			ii(81625800, 775381200),	// 79
			ii(91056800, 866438000)		// 80
		};

		// ty elwiki
		const upgradeRate upgradeChance[20] = {
			//Success   NC      Fail    Reset   Break
			{ 10000,	0,		0,		0,		0 },	// 0 -> 1
			{ 10000,	0,		0,		0,		0 },	// 1 -> 2
			{ 9500,		500,	0,		0,		0 },	// 2 -> 3
			{ 5700,		4050,	250,	0,		0 },	// 3 -> 4
			{ 3000,		4400,	2600,	0,		0 },	// 4 -> 5
			{ 1650,		3250,	5100,	0,		0 },	// 5 -> 6
			{ 1218,		1973,	3654,	1328,	1827 },	// 6 -> 7
			{ 750,		942,	3865,	2596,	1846 }, // 7 -> 8
			{ 346,		1635,	3115,	2923,	1980 }, // 8 -> 9
			{ 133,		728,	2252,	3907,	2980 }, // 9 -> 10
			{ 99,		1026,	1390,	4735,	2748 }, // 10 -> 11
			{ 0,		10000,	0,		0,		0 },	// 11 -> 12
			{ 0,		10000,	0,		0,		0 },	// 12 -> 13
			{ 0,		10000,	0,		0,		0 },	// 13 -> 14
			{ 0,		10000,	0,		0,		0 },	// 14 -> 15
			{ 0,		10000,	0,		0,		0 },	// 15 -> 16
			{ 0,		10000,	0,		0,		0 },	// 16 -> 17
			{ 0,		10000,	0,		0,		0 },	// 17 -> 18
			{ 0,		10000,	0,		0,		0 },	// 18 -> 19
			{ 0,		10000,	0,		0,		0 },	// 19 -> 20
		};

		int getUpgradeResult(int curlevel) {

			int number = Random::integer(1, 10000);
			int total = 0;

			total += upgradeChance[curlevel].success;
			if (number < total) {
				return 1;
			}
			total += upgradeChance[curlevel].noChange;
			if (number <= total) {
				return 3;
			}
			total += upgradeChance[curlevel].failure;
			if (number <= total) {
				return 4;
			}
			total += upgradeChance[curlevel].reset;
			if (number <= total) {
				return 5;		// might not be correct value
			}
			return 2;	// might not be correct value (break)

		}

		const int elShardReq[8] = {
			0,
			130048,	// fire
			130049, // water
			130051, // nature
			130050, // wind
			130053, // light
			130052, // dark
			130047  // random
		};

		const int elShardIGMod[6] = {
			0,
			2,  // unique
			0,  // elite
			-2, // rare
			-4, // normal
			0   // low
		};

	}
}